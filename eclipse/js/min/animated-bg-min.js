function updateDots(e){var t,r,a,n,o;for(t=0;lines>t;t++){for(a=sphere.children[t],r=0;dots>r;r++){n=sphere.children[t].geometry.vertices[r];var i=1-(a.radius-Math.abs(n.x))/a.radius;o=12*Math.sin(e/a.speed+.15*r)*i,n.y=o}a.geometry.verticesNeedUpdate=!0}}function render(e){requestAnimationFrame(render),updateDots(e),sphere.rotation.y=1e-4*e,sphere.rotation.x=1e-4*-e,renderer.render(scene,camera)}function onResize(){canvas.style.width="",canvas.style.height="",width=document.querySelector(".main-header").offsetWidth,height=document.querySelector(".main-header").offsetHeight,camera.aspect=width/height,camera.updateProjectionMatrix(),renderer.setSize(width,height)}if(document.querySelector("#eclipse-scene")){var canvas=document.querySelector("#eclipse-scene"),width=document.querySelector(".main-header").offsetWidth,height=document.querySelector(".main-header").offsetHeight,renderer=new THREE.WebGLRenderer({canvas:canvas,antialias:!0});renderer.setPixelRatio(window.devicePixelRatio>1?2:1),renderer.setSize(width,height);var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(40,width/height,.1,1e3);camera.position.set(0,0,280);var sphere=new THREE.Group;scene.add(sphere);var mat1=new THREE.LineBasicMaterial({color:"#343f87"}),mat2=new THREE.LineBasicMaterial({color:4868682});document.querySelector(".light-style")?(renderer.setClearColor("#ffffff"),mat1=new THREE.LineBasicMaterial({color:"#343f87"}),mat2=new THREE.LineBasicMaterial({color:"#64cde9"})):renderer.setClearColor("#151935");for(var radius=100,lines=50,dots=50,i=0;lines>i;i++){var geometry=new THREE.Geometry,line=new THREE.Line(this.geometry,Math.random()>.2?mat1:mat2);line.speed=300*Math.random()+250,line.wave=Math.random(),line.radius=Math.floor(radius+(Math.random()-.5)*(.2*radius));for(var j=0;dots>j;j++){var x=j/dots*line.radius*2-line.radius,vector=new THREE.Vector3(x,0,0);geometry.vertices.push(vector)}line.rotation.x=Math.random()*Math.PI,line.rotation.y=Math.random()*Math.PI,line.rotation.z=Math.random()*Math.PI,sphere.add(line)}requestAnimationFrame(render),window.addEventListener("resize",function(){onResize()})}document.querySelector("#eclipse-scene2")&&!function e(){function e(e,t){var r=e.clone();r.multiplyScalar(.2*(Math.random()-.5)+1),TweenMax.to(e,3*Math.random()+3,{x:r.x,y:r.y,z:r.z,yoyo:!0,repeat:-1,delay:3*-Math.random(),ease:Power0.easeNone,onUpdate:function(){x.array[3*t]=e.x,x.array[3*t+1]=e.y,x.array[3*t+2]=e.z}})}function t(e){var t;p.verticesNeedUpdate=!0,L.verticesNeedUpdate=!0,u.setFromCamera(U,E);var n=u.intersectObjects([z]);if(b=[],n.length)for(t=0;t<n.length;t++){var o=n[t].index;b.push(o),-1===G.indexOf(o)&&r(o)}for(t=0;t<G.length;t++)-1===b.indexOf(G[t])&&a(G[t]);G=b.slice(0),S.needsUpdate=!0,x.needsUpdate=!0,l.render(h,E)}function r(e){p.vertices[e].tl=new TimelineMax,p.vertices[e].tl.to(p.vertices[e],1,{scaleX:10,ease:Elastic.easeOut.config(2,.2),onUpdate:function(){S.array[e]=p.vertices[e].scaleX}})}function a(e){p.vertices[e].tl.to(p.vertices[e],.4,{scaleX:5,ease:Power2.easeOut,onUpdate:function(){S.array[e]=p.vertices[e].scaleX}})}function n(){i.style.width="",i.style.height="",s=i.offsetWidth,d=i.offsetHeight,E.aspect=s/d,E.updateProjectionMatrix(),l.setSize(s,d)}function o(e){var t=i.getBoundingClientRect();U.x=(e.clientX-t.left)/s*2-1,U.y=2*-((e.clientY-t.top)/d)+1}var i=document.querySelector("#eclipse-scene2"),s=i.offsetWidth,d=i.offsetHeight,c=[new THREE.Color("#262d60"),new THREE.Color("#245de9"),new THREE.Color("#060e23")],l=new THREE.WebGLRenderer({canvas:i,antialias:!0});l.setPixelRatio(window.devicePixelRatio>1?2:1),l.setSize(s,d),document.querySelector(".light-style")?(l.setClearColor("#ffffff"),c=[new THREE.Color("#bff3ff"),new THREE.Color("#245de9"),new THREE.Color("#64cde9")]):l.setClearColor("#151935");var h=new THREE.Scene,u=new THREE.Raycaster;u.params.Points.threshold=6;var E=new THREE.PerspectiveCamera(50,s/d,.1,2e3);E.position.set(0,0,350);var f=new THREE.Group;h.add(f);var m=new THREE.TextureLoader;m.crossOrigin="";for(var v=m.load("images/svg/dotTexture.png"),w=3e3,p=new THREE.Geometry,y=new Float32Array(3*w),R=new Float32Array(w),T=new Float32Array(3*w),M=0;w>M;M++){var H=new THREE.Vector3;H.color=Math.floor(Math.random()*c.length),H.theta=Math.random()*Math.PI*2,H.phi=(1-Math.sqrt(Math.random()))*Math.PI/2*(Math.random()>.5?1:-1),H.x=Math.cos(H.theta)*Math.cos(H.phi),H.y=Math.sin(H.phi),H.z=Math.sin(H.theta)*Math.cos(H.phi),H.multiplyScalar(120+5*(Math.random()-.5)),H.scaleX=5,Math.random()>.5&&e(H,M),p.vertices.push(H),H.toArray(y,3*M),c[H.color].toArray(T,3*M),R[M]=5}var g=new THREE.BufferGeometry,x=new THREE.BufferAttribute(y,3);g.addAttribute("position",x);var S=new THREE.BufferAttribute(R,1);g.addAttribute("size",S);var C=new THREE.BufferAttribute(T,3);g.addAttribute("color",C);var P=new THREE.ShaderMaterial({uniforms:{texture:{value:v}},vertexShader:document.getElementById("wrapVertexShader").textContent,fragmentShader:document.getElementById("wrapFragmentShader").textContent,transparent:!0}),z=new THREE.Points(g,P);h.add(z);var L=new THREE.Geometry,q=new THREE.LineBasicMaterial({color:16777215,transparent:!0,opacity:.3,vertexColors:THREE.VertexColors});for(M=p.vertices.length-1;M>=0;M--){H=p.vertices[M];for(var A=p.vertices.length-1;A>=0;A--)M!==A&&H.distanceTo(p.vertices[A])<12&&(L.vertices.push(H),L.vertices.push(p.vertices[A]),L.colors.push(c[H.color]),L.colors.push(c[H.color]))}var B=new THREE.LineSegments(L,q);f.add(B);var b=[],G=[],U=new THREE.Vector2(-100,-100);TweenMax.ticker.addEventListener("tick",t),window.addEventListener("mousemove",o);var j;window.addEventListener("resize",function(){j=clearTimeout(j),j=setTimeout(n,200)})}();