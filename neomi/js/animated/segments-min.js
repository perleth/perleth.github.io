!function(t){"use strict";function i(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}function n(t,i,n){var e;return function(){var o=this,s=arguments,a=function(){e=null,n||t.apply(o,s)},r=n&&!e;clearTimeout(e),e=setTimeout(a,i),r&&t.apply(o,s)}}function e(t,i,n){for(var e=[],o=0;n>o;++o)e.push(anime.random(t,i));return e.sort(function(t,i){return t-i}),e}function o(t){return Object.getOwnPropertyNames(t).length>0}function s(){for(var t={},i=arguments.length,n=0;i>n;n++)for(var e in arguments[n])arguments[n].hasOwnProperty(e)&&(t[e]=arguments[n][e]);return t}function a(){for(var t="clipPath",i=["webkit","moz","ms","o"],n=[t],e=document.createElement("testelement"),o="polygon(50% 0%, 0% 100%, 100% 100%)",s=0,a=i.length;a>s;s++){var r=i[s]+t.charAt(0).toUpperCase()+t.slice(1);n.push(r)}for(var s=0,a=n.length;a>s;s++){var p=n[s];if(""===e.style[p]&&(e.style[p]=o,""!==e.style[p]))return!0}return!1}function r(t,n){this.el=t,this.options=i({},this.options),i(this.options,n);var e=this;e._init(),e._initEvents(),e.options.onReady()}r.prototype.options={pieces:4,renderOnLoad:!1,shadows:!0,shadowsAnimation:{opacity:1},parallax:!1,parallaxMovement:{min:10,max:40},animation:{duration:1500,easing:"easeOutQuad",delay:0,translateZ:{min:10,max:65}},onReady:function(){return!1},onAnimationComplete:function(){return!1},onAnimationStart:function(){return!1},positions:[{top:80,left:10,width:30,height:20},{top:2,left:2,width:40,height:40},{top:30,left:60,width:30,height:60},{top:10,left:20,width:50,height:60}]},r.prototype._init=function(){this.dimensions={width:this.el.offsetWidth,height:this.el.offsetHeight};var t=this.el.style.backgroundImage;this.imgsrc=t.replace("url(","").replace(")","").replace(/\"/gi,""),this._layout();var i=this;this.pieces=[].slice.call(this.el.querySelectorAll(".segmenter__piece-wrap")),this.pieces.forEach(function(t,n){t.style.WebkitTransform=t.style.transform="translateZ(0.0001px)",i.options.renderOnLoad&&i._renderPiece(t)}),this.options.renderOnLoad&&(this.active=!0)},r.prototype._layout=function(){var t=a(),i=document.createElement("div");i.className="segmenter__background",i.style.backgroundImage="url("+this.imgsrc+")";var n=document.createElement("div"),e="",o=this.options.positions.length;n.className="segmenter__pieces";for(var s=0,r=this.options.pieces;r>s;++s){this.options.parallax&&(e+='<div class="segmenter__piece-parallax">'),e+='<div class="segmenter__piece-wrap">';var p,l,m,h,d,c,f,u,g=o-1>=s?s:0,v="random"===this.options.positions;p=v?anime.random(0,100):this.options.positions[g].top,l=v?anime.random(0,100):this.options.positions[g].left,m=v?anime.random(0,100):this.options.positions[g].width,h=v?anime.random(0,100):this.options.positions[g].height,t||(d=v?p/100*this.dimensions.height:this.options.positions[g].top/100*this.dimensions.height,c=v?l/100*this.dimensions.width:this.options.positions[g].left/100*this.dimensions.width,f=v?m/100*this.dimensions.width+c:this.options.positions[g].width/100*this.dimensions.width+c,u=v?h/100*this.dimensions.height+d:this.options.positions[g].height/100*this.dimensions.height+d),this.options.shadows&&(e+='<div class="segmenter__shadow" style="top: '+p+"%; left: "+l+"%; width: "+m+"%; height: "+h+'%"></div>'),e+=t?'<div class="segmenter__piece" style="background-image: url('+this.imgsrc+"); -webkit-clip-path: polygon("+l+"% "+p+"%, "+(l+m)+"% "+p+"%, "+(l+m)+"% "+(p+h)+"%, "+l+"% "+(p+h)+"%); clip-path: polygon("+l+"% "+p+"%, "+(l+m)+"% "+p+"%, "+(l+m)+"% "+(p+h)+"%, "+l+"% "+(p+h)+'%)"></div>':'<div class="segmenter__piece" style="background-image: url('+this.imgsrc+"); clip: rect("+d+"px,"+f+"px,"+u+"px,"+c+'px)"></div>',e+="</div>",this.options.parallax&&(e+="</div>")}n.innerHTML=e,this.el.innerHTML="",this.el.appendChild(i),this.el.appendChild(n)},r.prototype._renderPiece=function(t){var i=this.pieces.indexOf(t);if(void 0!=self.options.animation.translateZ)if("object"==typeof self.options.animation.translateZ){var n=e(self.options.animation.translateZ.min,self.options.animation.translateZ.max,self.options.pieces);t.style.transform=t.style.WebkitTransform="translateZ("+n[i]+"px)"}else t.style.transform=t.style.WebkitTransform="translateZ("+self.options.animation.translateZ+"px)";if(void 0!=self.options.animation.translateY)if("object"==typeof self.options.animation.translateY){var n=e(self.options.animation.translateY.min,self.options.animation.translateY.max,self.options.pieces);t.style.transform=t.style.WebkitTransform="translateY("+n[i]+"px)"}else t.style.transform=t.style.WebkitTransform="translateY("+self.options.animation.translateY+"px)";if(void 0!=self.options.animation.translateX)if("object"==typeof self.options.animation.translateX){var n=e(self.options.animation.translateX.min,self.options.animation.translateX.max,self.options.pieces);t.style.transform=t.style.WebkitTransform="translateX("+n[i]+"px)"}else t.style.transform=t.style.WebkitTransform="translateX("+self.options.animation.translateX+"px)";if(void 0!=self.options.animation.opacity&&(t.style.opacity=self.options.animation.opacity),self.options.shadows&&o(self.options.shadowsAnimation)){var s=t.querySelector(".segmenter__shadow");s.style.opacity=void 0!=self.options.shadowsAnimation.opacity?self.options.shadowsAnimation.opacity:0,s.style.transform=s.style.WebkitTransform="translateX("+(void 0!=self.options.shadowsAnimation.translateX?self.options.shadowsAnimation.translateX:0)+"px) translateY("+(void 0!=self.options.shadowsAnimation.translateY?self.options.shadowsAnimation.translateY:0)+"px)"}},r.prototype.animate=function(){if(this.active)return!1;this.active=!0;var t=this,i={targets:this.pieces,duration:this.options.animation.duration,delay:function(i,n){return(t.options.pieces-n-1)*t.options.animation.delay},easing:this.options.animation.easing,begin:this.options.onAnimationStart,complete:this.options.onAnimationComplete};if(void 0!=this.options.animation.translateZ){var n=e(this.options.animation.translateZ.min,this.options.animation.translateZ.max,this.options.pieces);i.translateZ="object"==typeof this.options.animation.translateZ?function(t,i){return n[i]}:this.options.animation.translateZ}void 0!=this.options.animation.translateX&&(i.translateX="object"==typeof this.options.animation.translateX?function(i,n){return anime.random(t.options.animation.translateX.min,t.options.animation.translateX.max)}:this.options.animation.translateX),void 0!=this.options.animation.translateY&&(i.translateY="object"==typeof this.options.animation.translateY?function(i,n){return anime.random(t.options.animation.translateY.min,t.options.animation.translateY.max)}:this.options.animation.translateY),void 0!=this.options.animation.opacity&&(i.opacity=this.options.animation.opacity),anime(i),this.options.shadows&&o(this.options.shadowsAnimation)&&anime(s({targets:this.el.querySelectorAll(".segmenter__shadow"),duration:this.options.animation.duration,delay:function(i,n){return(t.options.pieces-n-1)*t.options.animation.delay},easing:this.options.animation.easing},this.options.shadowsAnimation))},r.prototype._initEvents=function(){var i=this;if(this.debounceResize=n(function(t){var n=i.options.positions.length;i.dimensions={width:i.el.offsetWidth,height:i.el.offsetHeight},i.pieces.forEach(function(t,e){var o,s,a,r,p=t.querySelector(".segmenter__piece");if("random"===i.options.positions){var l=anime.random(0,100),m=anime.random(0,100),h=anime.random(0,100),d=anime.random(0,100);o=l/100*i.dimensions.height,s=m/100*i.dimensions.width,a=h/100*i.dimensions.width+s,r=d/100*i.dimensions.height+o}else{var c=n-1>=e?e:0;o=i.options.positions[c].top/100*i.dimensions.height,s=i.options.positions[c].left/100*i.dimensions.width,a=i.options.positions[c].width/100*i.dimensions.width+s,r=i.options.positions[c].height/100*i.dimensions.height+o}p.style.clip="rect("+o+"px,"+a+"px,"+r+"px,"+s+"px)"})},10),t.addEventListener("resize",this.debounceResize),this.options.parallax){var o=e(this.options.parallaxMovement.min,this.options.parallaxMovement.max,this.options.pieces);this.pieces.forEach(function(t,n){t.setAttribute("data-parallax-translation","object"==typeof i.options.parallaxMovement?o[n]:i.options.parallaxMovement)}),this.mousemove=function(t){return i.active?void requestAnimationFrame(function(){i.pieces.forEach(function(n){var e=n.getAttribute("data-parallax-translation"),o=e/i.dimensions.width*t.clientX-e/2,s=e/i.dimensions.height*t.clientY-e/2;n.parentNode.style.transform=n.parentNode.style.WebkitTransform="translate3d("+o+"px,"+s+"px,0)"})}):!1},t.addEventListener("mousemove",this.mousemove),this.handleOrientation=function(){if(!i.active)return!1;var t=event.gamma;t+=90,requestAnimationFrame(function(){i.pieces.forEach(function(n){var e=n.getAttribute("data-parallax-translation"),o=e/i.dimensions.width*t-e/2,s=e/i.dimensions.height*t-e/2;n.parentNode.style.transform=n.parentNode.style.WebkitTransform="translate3d("+o+"px,"+s+"px,0)"})})},t.addEventListener("deviceorientation",this.handleOrientation)}},t.Segmenter=r;var p,l;!function(){l=document.querySelector(".trigger-headline"),p=new r(document.querySelector(".segmenter"),{pieces:4,animation:{duration:4500,easing:"easeInOutExpo",delay:100,translateZ:100},parallax:!0,random:!0,positions:[{top:0,left:0,width:45,height:45},{top:55,left:0,width:45,height:45},{top:0,left:55,width:45,height:45},{top:55,left:55,width:45,height:45}]})}(),t.addEventListener("load",function(){p.animate(),l.classList.remove("trigger-headline--hidden")})}(window);